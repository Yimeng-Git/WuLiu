<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.wuliu.dao.WaybillDao">

    <resultMap type="com.example.wuliu.entity.Waybill" id="WaybillMap">
        <result property="tntnumber" column="tntnumber" jdbcType="VARCHAR"/>
        <result property="senname" column="senname" jdbcType="VARCHAR"/>
        <result property="senaddress" column="senaddress" jdbcType="VARCHAR"/>
        <result property="senzipcode" column="senzipcode" jdbcType="VARCHAR"/>
        <result property="senphonenum" column="senphonenum" jdbcType="VARCHAR"/>
        <result property="goodsname" column="goodsname" jdbcType="VARCHAR"/>
        <result property="recname" column="recname" jdbcType="VARCHAR"/>
        <result property="recphonenum" column="recphonenum" jdbcType="VARCHAR"/>
        <result property="recaddress" column="recaddress" jdbcType="VARCHAR"/>
        <result property="reczipcode" column="reczipcode" jdbcType="VARCHAR"/>
        <result property="carnum" column="carnum" jdbcType="VARCHAR"/>
        <result property="arrive" column="arrive" jdbcType="VARCHAR"/>
        <result property="wid" column="wid" jdbcType="INTEGER"/>
        <result property="status" column="status" jdbcType="VARCHAR"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryByNumber" resultMap="WaybillMap">
        select tntnumber,
               senname,
               senaddress,
               senzipcode,
               senphonenum,
               goodsname,
               recname,
               recphonenum,
               recaddress,
               reczipcode,
               carnum,
               arrive,
               wid,
               status
        from waybill
        where tntnumber = #{tntnumber}
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="wid" useGeneratedKeys="true">
        insert into waybill(tntnumber, senname, senaddress, senzipcode, senphonenum, goodsname, rename, recphonenum,
                            recaddress, reczipcode, carnum, arrive, status)
        values (#{tntnumber}, #{senname}, #{senaddress}, #{senzipcode}, #{senphonenum}, #{goodsname}, #{rename},
                #{recphonenum}, #{recaddress}, #{reczipcode}, #{carnum}, #{arrive}, #{status})
    </insert>

    <insert id="insertBatch" keyProperty="wid" useGeneratedKeys="true">
        insert into waybill(tntnumber, senname, senaddress, senzipcode, senphonenum, goodsname, rename, recphonenum,
        recaddress, reczipcode, carnum, arrive, status)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.tntnumber}, #{entity.senname}, #{entity.senaddress}, #{entity.senzipcode}, #{entity.senphonenum},
            #{entity.goodsname}, #{entity.rename}, #{entity.recphonenum}, #{entity.recaddress}, #{entity.reczipcode},
            #{entity.carnum}, #{entity.arrive}, #{entity.status})
        </foreach>
    </insert>

    <insert id="insertOrUpdateBatch" keyProperty="wid" useGeneratedKeys="true">
        insert into waybill(tntnumber, senname, senaddress, senzipcode, senphonenum, goodsname, rename, recphonenum,
        recaddress, reczipcode, carnum, arrive, status)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.tntnumber}, #{entity.senname}, #{entity.senaddress}, #{entity.senzipcode}, #{entity.senphonenum},
            #{entity.goodsname}, #{entity.rename}, #{entity.recphonenum}, #{entity.recaddress}, #{entity.reczipcode},
            #{entity.carnum}, #{entity.arrive}, #{entity.status})
        </foreach>
        on duplicate key update
        tntnumber = values(tntnumber),
        senname = values(senname),
        senaddress = values(senaddress),
        senzipcode = values(senzipcode),
        senphonenum = values(senphonenum),
        goodsname = values(goodsname),
        rename = values(rename),
        recphonenum = values(recphonenum),
        recaddress = values(recaddress),
        reczipcode = values(reczipcode),
        carnum = values(carnum),
        arrive = values(arrive),
        status = values(status)
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update waybill
        <set>
            <if test="tntnumber != null and tntnumber != ''">
                tntnumber = #{tntnumber},
            </if>
            <if test="senname != null and senname != ''">
                senname = #{senname},
            </if>
            <if test="senaddress != null and senaddress != ''">
                senaddress = #{senaddress},
            </if>
            <if test="senzipcode != null and senzipcode != ''">
                senzipcode = #{senzipcode},
            </if>
            <if test="senphonenum != null and senphonenum != ''">
                senphonenum = #{senphonenum},
            </if>
            <if test="goodsname != null and goodsname != ''">
                goodsname = #{goodsname},
            </if>
            <if test="rename != null and rename != ''">
                rename = #{rename},
            </if>
            <if test="recphonenum != null and recphonenum != ''">
                recphonenum = #{recphonenum},
            </if>
            <if test="recaddress != null and recaddress != ''">
                recaddress = #{recaddress},
            </if>
            <if test="reczipcode != null and reczipcode != ''">
                reczipcode = #{reczipcode},
            </if>
            <if test="carnum != null and carnum != ''">
                carnum = #{carnum},
            </if>
            <if test="arrive != null and arrive != ''">
                arrive = #{arrive},
            </if>
            <if test="status != null and status != ''">
                status = #{status},
            </if>
        </set>
        where wid = #{wid}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete
        from waybill
        where wid = #{wid}
    </delete>

    <select id="queryAll" resultMap="WaybillMap">
        select tntnumber,
        senname,
        senaddress,
        senzipcode,
        senphonenum,
        goodsname,
        recname,
        recphonenum,
        recaddress,
        reczipcode,
        carnum,
        arrive,
        wid,
        status
        from waybill
        <where>
            <if test="status!=null and status!=''">
                and status = #{status}
            </if>
            <if test="tntnumber!=null and tntnumber!=''">
                and tntnumber like '%${tntnumber}%'
            </if>

        </where>
    </select>

</mapper>

